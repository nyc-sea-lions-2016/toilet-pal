<script>
    var currentLongitude = -73.9712; //default at center manhattan
    var currentLatitude = 40.7831; //default at center manhattan
    navigator.geolocation.getCurrentPosition(function(p){
      currentLatitude = p.coords.latitude;
      currentLongitude = p.coords.longitude;
      // debugger
    });
</script>

<h1 id="homepage-header"> Helping you take the browns to the superbowl since 1999</h1>

<div id="toilets-index-table" class="row">


  <div id="google-map" ></div>

  <script>
  function initMap() {
    var mapDiv = document.getElementById('google-map');
    var map = new google.maps.Map(mapDiv, {
          center: {lat: 40.7831, lng: -73.9712},
          zoom: 11
        });
    var icon = "<%= asset_path 'poo.png' %>"
    $.getJSON("/toilet_data").done(function(toilets) {
      for(var i=0; i < 850; i++){
          var marker = new google.maps.Marker({
          position: {lat: (toilets[i].latitude - 0), lng: (toilets[i].longitude - 0)},
          map: map,
          icon: icon,
          title: toilets[i].name
    });
      }

    })
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"async defer></script>

<div class="row">
  <div class="small-12 columns">
    <%= form_for :user, url: users_path do |f| %>
      <%= f.text_field :user_input, placeholder: "Where do you want to pee?" %>

      <%= f.submit "Search", class: "primary button" %>
    <% end %>
  </div>
</div>


  <div id='filters'>

  <div id="toilets-index-list" >
    <ul class="small-block-grid-3">
      <%= render @toilets %>
    </ul>
  </div>

</div>

