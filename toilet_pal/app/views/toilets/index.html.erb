<script>
    var currentLongitude = -73.9712; //default at center manhattan
    var currentLatitude = 40.7831; //default at center manhattan
    navigator.geolocation.getCurrentPosition(function(p){
      currentLatitude = p.coords.latitude;
      currentLongitude = p.coords.longitude;
      // debugger
    });
</script>

<h1 id="homepage-header"> Helping you take the browns to the superbowl since 1999</h1>

<div id="toilets-index-table" class="row">


  <div id="google-map" ></div>


  <script>
  function initMap() {
    var mapDiv = document.getElementById('google-map');
    var map = new google.maps.Map(mapDiv, {
          center: {lat: 40.7831, lng: -73.9712},
          zoom: 11
        });
    $.getJSON("/toilet_data").done(function(toilets) {
      for(var i=0; i < 50; i++){
          var marker = new google.maps.Marker({
          position: {lat: (toilets[i].latitude - 0), lng: (toilets[i].longitude - 0)},
          map: map,
          title: toilets[i].name
    });
      }

    })
    var marker = new google.maps.Marker({
      position: {lat: 40.7831, lng: -73.9712},
      map: map,
      title: "TOILET"
    });
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"async defer></script>


  <div id="toilets-index-list" >
    <%= render @toilets %>
  </div>

</div>

